# VueRouter源码实现

1. VueRouter给我们提供的内容
   1. 构造函数
      1. VueRouter
         1. 通过对该函数进行构造调用,可以获得路由器对象
   2. 组件
      1. router-view组件
         1. 展示与当前路由路径匹配的组件
      2. router-link组件
         1. 用来实现让用户点击跳转路由地址的功能
         2. 需要我们传入to属性,告知该组件,点击之后跳转的路由地址
   3. 对象
      1. $router
         1. 该对象是路由器实例对象,专门给开发者提供控制当前路由显示和地址跳转的API
         2. push
            1. 通过该方法可以实现使用js方法控制当前页面地址跳转变化
      2. $route
         1. 该对象是路由实例对象,专门给开发者提供与当前路由相关的信息
2. 我们需要提供的内容
   1. 配置对象
      1. mode
         1. 用于指定当前前端路由的模式
         2. hashRouter
            1. 优点:
               1. 兼容性较好
               2. 相比于history模式,后端不需要做任何的配置
            2. 缺点:
               1. 路径中带有#号,太丑了
               2. 会导致锚点功能无法使用
            3. 原理:
               1. 控制地址栏变化
                  1. 通过window.location.hash="/about",可以操作浏览器的地址栏,并且保证**页面不会重新请求**
               2. 监视地址栏变化
                  1. 通过window身上的hashchange事件,可以监视地址栏变化(包括浏览器本身的前进后退按钮)
         3. historyRouter
            1. 优点:
               1. 好看
               2. 不会影响到锚点功能
            2. 缺点:
               1. 兼容性较差
               2. **项目上线时,后端需要进行专门的配置**
                  1. 如果用户处于"/home"路由,此时用户刷新页面
                  2. 浏览器会将/home地址发送给服务器,作为后端路由解析
                  3. 但是后端此时如果没有这个路由,会提示404
                     1. 所以在此处,后端需要做的事情就是,将他没有的路由都同意返回index.html文件
                  4. 浏览器接收到返回的index.html文件,当前网页中的VueRouter会主动解析地址栏中的/home,并跳转到对应的路由
            3. 原理:
               1. 通过window.history.pushState({},"","/about"),可以操作浏览器的地址栏,并且保证**页面不会重新请求**
               2. 监视地址栏变化
               3. 通过window身上的popstate事件,可以监视地址栏变化(**但是只能监视浏览器的前进后退操作**)
      2. routes
         1. 数据类型:routeObj[]
         2. 其中,数组中每一个对象都是一个路由,每个对象都必不可少的属性
            1. path
               1. 用于告知路由的地址
            2. component
               1. 用于告知,当当前浏览器地址栏中地址匹配路由地址时,需要显示的组件
3. 总结
   1. VueRouter是一个用来实现SPA应用的插件